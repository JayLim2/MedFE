<div class="page">
  <div class="page__title">
    Личный кабинет
  </div>
  <div class="page__content">
    <!--    <ng-container *ngIf="!authenticationService.isAuthenticated(); else lk">-->
    <ng-container *ngIf="false; else lk">
      <div class="message error">
        Извините, но пока что Вам сюда нельзя. <a routerLink="login">Войдите</a> в систему.
      </div>
    </ng-container>
    <ng-template #lk>
      <div class="tabs">
        <div class="tab"
             [ngClass]="selectedTab === 'main' ? 'selected' : ''"
             (click)="onTabClick('main')"
        >
          Основные данные
        </div>
        <div class="tab"
             [ngClass]="selectedTab === 'tickets' ? 'selected' : ''"
             (click)="onTabClick('tickets')"
        >
          Талоны
        </div>
        <div class="tab"
             [ngClass]="selectedTab === 'prescriptions' ? 'selected' : ''"
             (click)="onTabClick('prescriptions')"
        >
          Назначения
        </div>
        <div class="tab"
             [ngClass]="selectedTab === 'support' ? 'selected' : ''"
             (click)="onTabClick('support')"
        >
          Служба поддержки
        </div>
      </div>
    </ng-template>

    <ng-container [ngSwitch]="selectedTab">
      <ng-container *ngSwitchCase="'main'">
        <ng-content *ngTemplateOutlet="main"></ng-content>
      </ng-container>
      <ng-container *ngSwitchCase="'tickets'">
        <ng-content *ngTemplateOutlet="tickets"></ng-content>
      </ng-container>
      <ng-container *ngSwitchCase="'prescriptions'">
        <ng-content *ngTemplateOutlet="prescriptions"></ng-content>
      </ng-container>
      <ng-container *ngSwitchCase="'support'">
        <ng-content *ngTemplateOutlet="support"></ng-content>
      </ng-container>
    </ng-container>
  </div>
</div>

<ng-template #main>
  Основные данные пациента или врача.
  <div style="display: flex; margin:25px 0;">
    <!-- avatar -->
    <div style="display: flex; flex-direction: column;text-align: center">
      <img src="https://sun9-21.userapi.com/c849028/v849028742/163975/Xx9_qlxiDng.jpg"
           style="width: 140px; border-radius: 10px"
           alt="Фото профиля"
      />
      <a routerLink="profile/editAvatar">
        <span style="font-size: 11pt">
          Изменить фото
        </span>
      </a>
    </div>
    <!-- main data -->
    <div style="display: flex; flex-direction: column; margin-left: 25px;">
      <data-field [name]="'Фамилия, имя, отчество'"
                  [value]="'Комаров Сергей Геннадьевич'"
      ></data-field>
      <data-field [name]="'Дата рождения'"
                  [value]="'18 февраля 1998 года'"
      ></data-field>
      <data-field [name]="'Полис ОМС'"
                  [value]="'0000-0000 00 000'"
      ></data-field>
    </div>
  </div>
</ng-template>

<ng-template #tickets>
  <div>
    Талоны, который оформил пациент или получил врач.
    <button class="button medium"
            style="width: 250px; margin-left: 20px"
            routerLink="/tickets/create"
    >Записаться на прием</button>
  </div>

  <div class="tickets">
    <div class="item">
      <div class="item__header">
        Талон № 1
      </div>
      <div class="item__content">
        <div class="data">
          <data-field [name]="'Пациент'"
                      [value]="'Комаров Сергей Геннадьевич'"
          ></data-field>
          <data-field [name]="'Время приема'"
                      [value]="'07.10.2020 10:15'"
          ></data-field>
          <data-field [name]="'Врач'"
                      [value]="'Лечилов Александр Георгиевич'"
          ></data-field>
          <data-field [name]="'Кабинет'"
                      [value]="'14'"
          ></data-field>
          <data-field [name]="'Специализация'"
                      [value]="'врач-терапевт'"
          ></data-field>
          <data-field [name]="'Полис ОМС пациента'"
                      [value]="'0000-0000 00 000'"
          ></data-field>
        </div>

        <div class="controls">
          <button class="button medium outline">Назначения</button>
          <button class="button medium">Изменить время приема</button>
          <button class="button medium reject-button">Отменить талон</button>
        </div>
      </div>
    </div>

    <div class="item">
      <div class="item__header">
        Талон № 2
      </div>
      <div class="item__content">
        <div class="data">
          <data-field [name]="'Пациент'"
                      [value]="'Комаров Сергей Геннадьевич'"
          ></data-field>
          <data-field [name]="'Время приема'"
                      [value]="'02.01.2020 08:00'"
          ></data-field>
          <data-field [name]="'Врач'"
                      [value]="'Калеченко Георгий Сигизмундович'"
          ></data-field>
          <data-field [name]="'Кабинет'"
                      [value]="'21'"
          ></data-field>
          <data-field [name]="'Специализация'"
                      [value]="'травмотолог'"
          ></data-field>
          <data-field [name]="'Полис ОМС пациента'"
                      [value]="'0000-0000 00 000'"
          ></data-field>
        </div>

        <div class="controls">
          <button class="button medium">Изменить время приема</button>
          <button class="button medium reject-button">Отменить талон</button>
        </div>
      </div>
    </div>
    <div class="item">
      <div class="item__header">
        Талон № 3
      </div>
      <div class="item__content">
        <div class="data">
          <data-field [name]="'Пациент'"
                      [value]="'Комаров Сергей Геннадьевич'"
          ></data-field>
          <data-field [name]="'Время приема'"
                      [value]="'21.11.2020 16:30'"
          ></data-field>
          <data-field [name]="'Врач'"
                      [value]="'Кромсалов Ганнибал Лекторович'"
          ></data-field>
          <data-field [name]="'Кабинет'"
                      [value]="'32'"
          ></data-field>
          <data-field [name]="'Специализация'"
                      [value]="'хирург'"
          ></data-field>
          <data-field [name]="'Полис ОМС пациента'"
                      [value]="'0000-0000 00 000'"
          ></data-field>
        </div>

        <div class="controls">
          <button class="button medium">Изменить время приема</button>
          <button class="button medium reject-button">Отменить талон</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #prescriptions>
  Назначения, которые получил пациент или сформировал врач.

  <div class="tickets">
    <div class="item">
      <div class="item__header">
        Назначение врача по талону № 3
      </div>
      <div class="item__content">
        <div class="data">
          <data-field [name]="'Пациент'"
                      [value]="'Комаров Сергей Геннадьевич'"
          ></data-field>
          <data-field [name]="'Врач'"
                      [value]="'Лечилов Александр Георгиевич'"
          ></data-field>
          <data-field [name]="'Назначение'"
                      [value]="'Пиво, водка, кислота наши лучшие друзья'"
          ></data-field>
        </div>

        <div class="controls">
          <button class="button medium outline">Талон</button>
          <button class="button medium">Изменить время приема</button>
          <button class="button medium reject-button">Отменить талон</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #support>
  Служба поддержки работает 24/7, чтобы Вы могли получать качественные услуги.

  <div class="tickets">
    <div class="item">
      <div class="item__header">
        Обращение в поддержку №1
      </div>
      <div class="item__content">
        <div class="data">
          <div class="support-ticket-status opened"></div>

          <data-field [name]="'Логин пользователя'"
                      [value]="'+78005553535'"
          ></data-field>
          <data-field [name]="'С чем возникла проблема:'"
                      [value]="'Запись на прием'"
          ></data-field>
          <data-field [name]="'Описание проблемы'"
                      [value]="'Я куда-то нажал и оно всё сломалось. Почините.'"
          ></data-field>
        </div>

        <div class="controls">
          <button class="button medium">Открыть чат</button>
          <button class="button medium reject-button">Закрыть обращение</button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
